<%#
/**
 * @component ChatInput
 * @description Message input component for chat interface
 * 
 * Features:
 * - Character limit (500 chars)
 * - Character counter with color indicators
 * - Responsive design
 * - Focus states
 * - Submit button
 * - Form validation
 * 
 * Visual Feedback:
 * - Normal: Gray counter (0-300 chars)
 * - Warning: Yellow counter (301-400 chars)
 * - Critical: Red counter (401-500 chars)
 * 
 * Styling:
 * - Custom placeholder color
 * - Focus state handling
 * - Rounded corners
 * - Consistent spacing
 */
%>

<div class="p-4 flex items-center gap-3">
    <div class="flex-1 relative">
        <input
            type="text" 
            name="text" 
            placeholder="Type your message here" 
            class="w-full px-4 py-2 text-base rounded-md focus:outline-none bg-white border border-gray-300"
            id="chatInput"
            maxlength="500"
            required
        />
    </div>
    <button 
        type="submit"
        class="px-4 py-2 bg-[#6B46C1] text-white text-lg rounded-r hover:bg-[#553C9A] focus:outline-none rounded-full flex items-center justify-center"
        style="background-color: #6B46C1;"
    >
        Send
    </button>
</div>
    
<style>
    #chatInput::placeholder {
        color: #9ca3af;
    }
    
    #chatInput:focus {
        background-color: white;
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const chatInput = document.getElementById('chatInput');
        const charCounter = document.getElementById('charCounter');
        
        if (chatInput && charCounter) {
            chatInput.addEventListener('input', function() {
                charCounter.textContent = this.value.length;
                
                if (this.value.length > 400) {
                    charCounter.style.color = '#ef4444'; 
                } else if (this.value.length > 300) {
                    charCounter.style.color = '#f59e0b'; 
                } else {
                    charCounter.style.color = '#9ca3af'; 
                }
            });
        }
    });
</script>