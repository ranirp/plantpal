<!DOCTYPE html>
<html lang="en" data-theme="cupcake">
<head>
    <title>Plant Sharing Community</title>
    <link rel="stylesheet" href="/css/outputStyles.css" />
    <link rel="manifest" href="/manifest.json"/>
    <script src="/javascripts/user/userIDBUtility.js"></script>
    <script src="/javascripts/user/userScript.js"></script>
    <script src="/javascripts/user/userRenderScript.js"></script>
    <script src="/javascripts/addPlant/addPlantUtility.js"></script>
    <script src="/javascripts/homepage/homepageScript.js"></script>
    <script src="/javascripts/homepage/homepageRenderScript.js"></script>
</head>
<body onload="init()">
    <!--Include the header component at the top-->
    <%- include('../components/header.ejs') %>
    
    <!--Main container with layout spanning the full viewport height-->
    <div class="flex flex-col min-h-screen pt-20">

        <!--Filter and sort controls-->
        <div class="bg-white shadow-md p-4 flex flex-col lg:flex-row gap-4 items-center justify-between">
            <!--Filter by type-->
            <div class="flex items-center gap-2 w-full lg:w-auto">
                <label for="typeFilter" class="font-bold text-gray-700 text-sm lg:text-base whitespace-nowrap">Filter:</label>
                <select id="typeFilter" class="select select-bordered w-full max-w-xs text-sm lg:text-base" onchange="filterByType()">
                    <option value="all">All Types</option>
                    <option value="succulent">Succulent</option>
                    <option value="fern">Fern</option>
                    <option value="houseplant">Houseplant</option>
                    <option value="vegetable">Vegetable</option>
                    <option value="flowering">Flowering</option>
                    <option value="herb">Herb</option>
                    <option value="other">Other</option>
                </select>
            </div>

            <!--Sort Controls-->
            <div class="flex items-center gap-2 w-full lg:w-auto">
                <label for="sortOptions" class="font-bold text-gray-700 text-sm lg:text-base whitespace-nowrap">Sort:</label>
                <div class="btn-group">
                    <button class="btn btn-sm btn-neutral text-xs lg:text-sm" onclick="sortPlants('date')">Date</button>
                    <button class="btn btn-sm btn-neutral text-xs lg:text-sm" onclick="sortPlants('type')">Type</button>
                    <button class="btn btn-sm btn-neutral text-xs lg:text-sm" onclick="sortPlants('name')">Name</button>
                </div>
            </div>

                <!-- Queue counter -->
                <div class="flex items-center gap-2 w-full lg:w-auto">
                    <div class="badge badge-warning hidden" id="queue_counter">0</div>
                    <span class="text-sm">items queued</span>
                </div>

            <!--Add Plant Button-->
            <div class="flex items-center gap-2 w-full lg:w-auto">
                <button 
                    class="btn btn-primary w-full lg:w-auto text-sm lg:text-base"
                    onclick="openAddPlantPage()"
                >
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 8v8M8 12h8"/>
                    </svg>
                    Add Plant
                </button>
            </div>
        </div>

        <!--Grid layout for displaying the list of plants-->
        <div class="flex-1 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 p-6" id="plantList">
            <!--Plant cards will be dynamically inserted here-->
        </div>
    </div>
    <!--Include the online/offline mode component-->
    <%- include('../components/onlineOfflineMode.ejs') %>
        <!-- Floating Sync Now button (bottom-left) -->
        <div class="fixed bottom-10 left-10">
            <button 
                class="btn btn-primary btn-circle btn-lg shadow-2xl"
                onclick="manualSync()"
                id="sync_button"
                aria-label="Sync Now"
            >
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                        d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                </svg>
            </button>
        </div>
</body>
</html>